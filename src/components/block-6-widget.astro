<div id="utya-nft-section" style="
  backdrop-filter: blur(12px);
  background: rgba(255, 255, 255, 0.10);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 24px;
  margin: 60px auto;
  max-width: 1200px;
  color: white;
  text-align: center;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.35);
  font-family: 'Fredoka One', cursive, sans-serif;
  padding-bottom: 40px;
">
  <h2 style="font-size: 44px; margin-bottom: 16px; font-weight: 900; letter-spacing: 1.5px;">
    Meet the Legendary UTYA NFT Collection
  </h2>

  <p style="font-size: 18px; max-width: 860px; margin: 0 auto 40px auto; line-height: 1.7; color: #FFD700;">
    From viral Telegram stickers to collectible on-chain assets — the UTYA NFTs are not just art, they're a movement. Dive into the most iconic ducks of the blockchain, hand-drawn and community-loved.
  </p>

  <div id="nft-scroll">
    <div class="nft-card" data-lottie-src="/nft-1.json"></div>
    <div class="nft-card" data-lottie-src="/nft-2.json"></div>
    <div class="nft-card" data-lottie-src="/nft-3.json"></div>
    <div class="nft-card" data-lottie-src="/nft-4.json"></div>
    <div class="nft-card" data-lottie-src="/nft-5.json"></div>
    <div class="nft-card" data-lottie-src="/nft-6.json"></div>
    <div class="nft-card" data-lottie-src="/nft-7.json"></div>
    <div class="nft-card" data-lottie-src="/nft-8.json"></div>
    <div class="nft-card" data-lottie-src="/nft-9.json"></div>
    <div class="nft-card" data-lottie-src="/nft-10.json"></div>
    <div class="nft-card" data-lottie-src="/nft-11.json"></div>
    <div class="nft-card" data-lottie-src="/nft-12.json"></div>
    <div class="nft-card" data-lottie-src="/nft-13.json"></div>
    <div class="nft-card" data-lottie-src="/nft-14.json"></div>
    <div class="nft-card" data-lottie-src="/nft-15.json"></div>
    <div class="nft-card" data-lottie-src="/nft-16.json"></div>
  </div>
</div>

<style>
#nft-scroll {
  display: flex;
  overflow-x: auto;
  gap: 16px;
  padding: 0 20px 8px;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  cursor: grab;
  user-select: none;

  scrollbar-width: none;
  -ms-overflow-style: none;
}

#nft-scroll::-webkit-scrollbar {
  display: none;
}

#nft-scroll.dragging {
  cursor: grabbing;
  user-select: none;
}

.nft-card {
  flex: 0 0 auto;
  width: 150px;
  height: 150px;
  border-radius: 16px;
  overflow: hidden;
  scroll-snap-align: center;
  background: transparent;
}
</style>

<!-- اضافه کردن لایبری Lottie -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.2/lottie.min.js"></script>

<script>
// مدیریت انیمیشن‌های Lottie با IntersectionObserver

const lottieCards = document.querySelectorAll('.nft-card');
const lottiePlayers = new Map();

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    const el = entry.target;

    if (entry.isIntersecting) {
      if (!lottiePlayers.has(el)) {
        const animation = lottie.loadAnimation({
          container: el,
          renderer: 'svg',
          loop: true,
          autoplay: true,
          path: el.dataset.lottieSrc
        });
        lottiePlayers.set(el, animation);
      } else {
        lottiePlayers.get(el).play();
      }
    } else {
      if (lottiePlayers.has(el)) {
        lottiePlayers.get(el).pause();
      }
    }
  });
}, { threshold: 0.5 });

lottieCards.forEach(card => observer.observe(card));

// اسکرول افقی با چرخ موس برای دسکتاپ
const scrollContainer = document.getElementById('nft-scroll');

scrollContainer.addEventListener('wheel', function (e) {
  if (window.innerWidth >= 768 && Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
    e.preventDefault();
    scrollContainer.scrollLeft += e.deltaY * 1.2;
  }
}, { passive: false });

// درگ برای اسکرول
let isDown = false;
let startX;
let scrollLeft;

scrollContainer.addEventListener('mousedown', (e) => {
  isDown = true;
  scrollContainer.classList.add('dragging');
  startX = e.pageX - scrollContainer.offsetLeft;
  scrollLeft = scrollContainer.scrollLeft;
});
scrollContainer.addEventListener('mouseleave', () => {
  isDown = false;
  scrollContainer.classList.remove('dragging');
});
scrollContainer.addEventListener('mouseup', () => {
  isDown = false;
  scrollContainer.classList.remove('dragging');
});
scrollContainer.addEventListener('mousemove', (e) => {
  if (!isDown) return;
  e.preventDefault();
  const x = e.pageX - scrollContainer.offsetLeft;
  const walk = (x - startX) * 1.5;
  scrollContainer.scrollLeft = scrollLeft - walk;
});
</script>
